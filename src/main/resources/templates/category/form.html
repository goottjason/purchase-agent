<!-- src/main/resources/templates/category/form.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <title>Category Form</title>
</head>
<body>
<h1 th:text="${form.id == null ? '카테고리 등록' : '카테고리 수정'}">Form</h1>

<!-- 방법 A: 한 줄 3항식을 @{} 안에서 처리 -->
<form th:action="${form.id} == null ? @{/categories} : @{/categories/{id}(id=${form.id})}"
      th:object="${form}" method="post">
  <div th:if="${#fields.hasGlobalErrors()}" style="color: red" th:each="e : ${#fields.globalErrors()}" th:text="${e}">에러</div>

  <input type="hidden" th:if="${form.id != null}" th:field="*{id}"/>

  <div>
    <label>부모</label>
    <select th:field="*{parentId}">
      <option th:value="''">(루트)</option>
      <option th:each="p : ${parents}"
              th:value="${p.id}"
              th:text="${p.path + ' | ' + (p.engName != null ? p.engName : '')}"></option>
    </select>
  </div>

  <div>
    <label>Code</label>
    <input type="text" th:field="*{code}" placeholder="candida-yeast-treatments"/>
  </div>

  <div>
    <label>ENG Name</label>
    <input type="text" th:field="*{engName}" placeholder="Candida & Yeast Treatments"/>
  </div>

  <div>
    <label>KOR Name</label>
    <input type="text" th:field="*{korName}" placeholder="칸디다 & 질염 트리트먼트"/>
  </div>

  <div>
    <label>Link</label>
    <input type="url" th:field="*{link}" placeholder="https://kr.iherb.com/c/candida-yeast-treatments"/>
  </div>

  <div style="margin-top: 12px">
    <button type="submit" th:text="${form.id == null ? '등록' : '수정'}">저장</button>
    <a th:href="@{/categories}">목록</a>
  </div>
</form>
</body>
</html>
