<!-- src/main/resources/templates/category/list.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <title>Categories</title>
</head>
<body>
<h1>Categories</h1>

<div th:if="${msg}" th:text="${msg}" style="color: green"></div>
<div th:if="${err}" th:text="${err}" style="color: red"></div>

<form th:action="@{/categories}" method="get">
  <input type="text" name="q" placeholder="검색" th:value="${q}"/>
  <button type="submit">검색</button>
  <a th:href="@{/categories}">초기화</a>
</form>

<p>
  <a th:href="@{/categories/new}">신규 등록</a>
</p>

<table border="1" cellpadding="6" cellspacing="0">
  <thead>
  <tr>
    <th>ID</th>
    <th>Path</th>
    <th>Parent</th>
    <th>Code</th>
    <th>ENG</th>
    <th>KOR</th>
    <th>Link</th>
    <th>Action</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="c : ${page.content}">
    <td th:text="${c.id}">id</td>
    <td th:text="${c.path}">/0001/0002</td>
    <td th:text="${c.parent == null ? '(루트)' : c.parent.id}">(루트)</td>
    <td th:text="${c.code}">slug</td>
    <td th:text="${c.engName}">eng</td>
    <td th:text="${c.korName}">kor</td>
    <td><a th:href="${c.link}" th:text="${c.link}" target="_blank">link</a></td>
    <td>
      <a th:href="@{|/categories/${c.id}/edit|}">수정</a>
      <form th:action="@{|/categories/${c.id}/delete|}" method="post" style="display:inline">
        <button type="submit" onclick="return confirm('삭제하시겠습니까?');">삭제</button>
      </form>
    </td>
  </tr>
  </tbody>
</table>

<!-- 간단 페이지 네비게이션 -->
<div>
  <span th:text="${page.number + 1}">1</span> / <span th:text="${page.totalPages}">1</span>
  <div>
    <a th:if="${!page.first}" th:href="@{/categories(page=${page.number - 1}, size=${page.size}, q=${q})}">이전</a>
    <a th:if="${!page.last}" th:href="@{/categories(page=${page.number + 1}, size=${page.size}, q=${q})}">다음</a>
  </div>
</div>
</html>
